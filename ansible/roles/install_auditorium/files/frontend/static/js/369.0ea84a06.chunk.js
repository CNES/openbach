"use strict";(self.webpackChunkihm=self.webpackChunkihm||[]).push([[369],{4369:function(e,n,t){t.r(n),t.d(n,{default:function(){return Pe}});var r=t(1413),i=t(9439),a=t(2791),s=t(7689),o=t(4395),c=t(3896),l=t(5228),u=t(3433),d=t(4554),f=t(6151),h=t(9157),j=t(1691),x=t(5699),p=t(7381),v=t(565),m=t(1524),g=t(9877),b=t(5130),Z=t(8096),y=t(4925),k=t(3786),w=t(9321),C=t(7391),S=t(7621),A=t(2363),I=t(9504),N=t(9585),E=t(2169),P=t(5346),T=t(184),D=function(e){var n=e.title,t=e.subtitle,r=e.media,i=e.actions,a=e.children,s=(0,P.v9)((function(e){return e.login.is_user}));return(0,T.jsxs)(S.Z,{sx:{position:"relative"},children:[(0,T.jsx)(N.Z,{title:n,subheader:t,sx:{height:"64px",backgroundColor:"rgba(0, 0, 0, 0.4)"}}),(0,T.jsx)(E.Z,{component:"img",alt:"header logo",image:r,height:"96",sx:{objectFit:"contain",position:"absolute",width:"96px",top:0,right:8}}),(0,T.jsx)(I.Z,{children:a}),s&&null!=i&&(0,T.jsx)(A.Z,{disableSpacing:!0,sx:{display:"flex",flexDirection:"column",gap:1},children:i})]})},O=t(2542),W="/assets/project.svg",F=function(e){var n=e.project,t=(0,P.v9)((function(e){return e.login.is_user})),r=(0,P.v9)((function(e){return e.openbach.agents})),s=(0,P.I0)(),o=a.useState(""),c=(0,i.Z)(o,2),l=c[0],u=c[1],d=a.useState(""),h=(0,i.Z)(d,2),j=h[0],x=h[1],p=a.useState(""),v=(0,i.Z)(p,2),m=v[0],g=v[1],b=a.useCallback((function(e){u(e.target.value)}),[]),S=a.useCallback((function(e){x(e.target.value)}),[]),A=a.useCallback((function(e){var n=e.target.value;g(n||"")}),[]),I=a.useCallback((function(){l&&(s((0,O.Ce)({project:n,name:l,description:j||void 0,agent:null===r||void 0===r?void 0:r.find((function(e){return e.address===m}))})),u(""),x(""),g(""))}),[n,r,l,j,m,s]),N=a.useMemo((function(){return(r||[]).filter((function(e){return!e.project&&e.reserved===n})).map((function(e){return(0,T.jsx)(k.Z,{value:e.address,children:e.name},e.address)}))}),[r,n]),E=a.useMemo((function(){return(r||[]).filter((function(e){return!e.project&&!e.reserved})).map((function(e){return(0,T.jsx)(k.Z,{value:e.address,children:e.name},e.address)}))}),[r]);return t?(0,T.jsxs)(D,{title:"Add Entity",subtitle:"Create a new Entity for an Agent",media:W,actions:(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:!l,onClick:I,children:"Add Entity"}),children:[(0,T.jsx)(C.Z,{required:!0,margin:"dense",variant:"standard",label:"Entity Name",value:l,onChange:b,fullWidth:!0}),(0,T.jsx)(C.Z,{margin:"dense",variant:"standard",label:"Entity Description",value:j,onChange:S,fullWidth:!0,multiline:!0,rows:3}),(0,T.jsxs)(Z.Z,{fullWidth:!0,sx:{mt:3},children:[(0,T.jsx)(y.Z,{id:"entity-add-label",children:"Associated Agent"}),(0,T.jsxs)(w.Z,{required:!0,labelId:"entity-add-label",id:"entity-add-select",label:"Associated Agent",value:m,onChange:A,children:[(0,T.jsx)(k.Z,{value:""}),(0,T.jsx)(k.Z,{children:"--- Agents reserved for this project ---"}),N,(0,T.jsx)(k.Z,{children:"--- Free Agents ---"}),E]})]})]}):(0,T.jsx)(D,{title:"Entity",subtitle:"Click on an entity to select it",media:W,children:"No entity selected"})},_=function(e){var n=e.project,t=e.jobs,r=e.agent,i=e.onAgentChange,s=(0,P.v9)((function(e){return e.openbach.agents})),o=a.useCallback((function(e){var n=e.target.value;i(n?null===s||void 0===s?void 0:s.find((function(e){return e.address===n})):void 0)}),[s,i]),c=a.useMemo((function(){return(s||[]).filter((function(e){return e.reserved===n&&(!e.project||e.address===(null===r||void 0===r?void 0:r.address))})).map((function(e){return(0,T.jsx)(k.Z,{value:e.address,children:e.name},e.address)}))}),[s,n,r]),l=a.useMemo((function(){return(s||[]).filter((function(e){return!e.reserved&&(!e.project||e.address===(null===r||void 0===r?void 0:r.address))})).map((function(e){return(0,T.jsx)(k.Z,{value:e.address,children:e.name},e.address)}))}),[s,r]),u=(0,T.jsxs)(Z.Z,{fullWidth:!0,children:[(0,T.jsx)(y.Z,{id:"entity-change-label",children:"Associated Agent"}),(0,T.jsxs)(w.Z,{labelId:"entity-change-label",id:"entity-change-select",label:"Associated Agent",value:(null===r||void 0===r?void 0:r.address)||"",onChange:o,children:[(0,T.jsx)(k.Z,{value:""}),(0,T.jsx)(k.Z,{children:"--- Agents reserved for this project ---"}),c,(0,T.jsx)(k.Z,{children:"--- Free Agents ---"}),l]})]});if(!r)return u;var d=null===s||void 0===s?void 0:s.find((function(e){return e.address===r.address})),f=null===d||void 0===d?void 0:d.services,h=null!==f&&void 0!==f&&f.hasOwnProperty("ntp.service")?f["ntp.service"].split(/\r?\n/).find((function(e){return e.startsWith("*")})):"",j=""===h?"NTP status not fetched":h?"NTP offset: "+h.split(/\s+/)[8]+" ms":"NTP not synchronized",x=null===d||void 0===d?void 0:d.errors;return(0,T.jsxs)("ul",{children:[(0,T.jsx)("li",{children:u}),(0,T.jsxs)("li",{children:["IP used for installation: ",(0,T.jsx)("b",{children:r.address})]}),(0,T.jsxs)("li",{children:["Collector: ",(0,T.jsx)("b",{children:r.collector_ip})]}),(0,T.jsxs)("li",{children:["Installed jobs: ",t.length?(0,T.jsx)("ul",{children:t.map((function(e){return(0,T.jsx)("li",{children:e},e)}))}):"No jobs installed"]}),(0,T.jsx)("li",{children:j}),x&&x.length>0&&(0,T.jsx)("li",{children:(0,T.jsx)("ul",{children:x.map((function(e,n){return(0,T.jsx)("li",{children:e.msg},n)}))})})]})},M=t(1918),U=t(178),R=t(248),q=function(e){var n=e.options,t=e.action,r=e.agent,s=(0,P.I0)(),o=a.useState([]),c=(0,i.Z)(o,2),l=c[0],u=c[1],h=a.useCallback((function(e){var n=e.target.value;u("string"===typeof n?[]:n)}),[]),j=a.useCallback((function(){if(l.length){switch(t){case"install":s((0,U.eJ)({jobNames:l,agents:[r]}));break;case"uninstall":s((0,U.xT)({jobNames:l,agents:[r]}));break;default:return void u([])}l.forEach((function(e){s((0,R.q2)({job:e,agent:r,action:t}))})),setTimeout((function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})}),50)}u([])}),[l,t,r,s]);return a.useEffect((function(){u([])}),[n]),(0,T.jsxs)(d.Z,{display:"flex",alignItems:"center",width:"100%",gap:1,children:[(0,T.jsxs)(f.Z,{variant:"contained",color:"secondary",onClick:j,children:[t," jobs"]}),(0,T.jsx)(Z.Z,{sx:{flexGrow:1},children:(0,T.jsx)(w.Z,{multiple:!0,fullWidth:!0,value:l,onChange:h,renderValue:function(e){return(0,T.jsx)(d.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return(0,T.jsx)(M.Z,{label:e},e)}))})},children:n.map((function(e){return(0,T.jsx)(k.Z,{value:e,children:e},e)}))})})]})},L=t(2050),B=function(e){var n=e.project,t=e.entity,r=t.name,s=t.description,o=t.agent,c=t.networks,l=e.onRemove,u=(0,P.v9)((function(e){return e.openbach.jobs})),d=(0,P.I0)(),h=a.useState([]),j=(0,i.Z)(h,2),x=j[0],p=j[1],v=a.useCallback((function(){d((0,O.Sx)({project:n,name:r})),l()}),[n,r,d,l]),m=a.useCallback((function(e){d((0,O.BU)({project:n,name:r,description:s,agent:e,networks:c}))}),[n,r,s,c,d]),g=a.useMemo((function(){return(c||[]).map((function(e){return(0,T.jsxs)("li",{children:[e.interface,": ",e.ip," (network ",e.name,")"]},e.interface)}))}),[c]);a.useEffect((function(){if(o){var e=o.address,n=d((0,L.Ly)({address:e}));return n.unwrap().then((function(e){p(e)})),function(){n.abort()}}}),[o,d]);var b=(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",onClick:v,children:"Remove Entity"});return(0,T.jsx)(D,{title:"Entity",subtitle:"Click on an entity to select it",media:"/assets/server.svg",actions:o?(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(q,{agent:o.address,action:"install",options:(u||[]).filter((function(e){return!x.includes(e.general.name)})).map((function(e){return e.general.name}))}),(0,T.jsx)(q,{agent:o.address,action:"uninstall",options:x}),b]}):b,children:(0,T.jsxs)("ul",{children:[(0,T.jsxs)("li",{children:["Description: ",(0,T.jsx)("b",{children:s})]}),(0,T.jsxs)("li",{children:["OS: ",(0,T.jsx)("b",{children:"Linux"})]}),(0,T.jsxs)("li",{children:["Interfaces: ",(0,T.jsx)("ul",{children:g})]}),(0,T.jsxs)("li",{children:["Agent:",(0,T.jsx)(_,{jobs:x,agent:o,project:n,onAgentChange:m})]})]})})},J=t(5522),z=t(5616),H=function(e){var n=e.network,t=n.name,s=n.address,o=e.onChange,c=(0,P.v9)((function(e){return e.project.current})),l=(0,P.I0)(),d=a.useState(t),h=(0,i.Z)(d,2),j=h[0],x=h[1],p=a.useCallback((function(e){x(e.target.value)}),[]),v=a.useCallback((function(){c&&l((0,J.f3)({project:c.name,newName:{name:j,address:s}}))}),[c,s,j,l]),m=a.useCallback((function(){if(c){l((0,z.PJ)("Updating Topology, please wait!"));var e=[].concat((0,u.Z)(c.hidden_network),[s]);l((0,J.ty)({name:c.name,project:(0,r.Z)((0,r.Z)({},c),{},{hidden_network:e})})),o()}}),[c,s,l,o]);return(0,T.jsxs)(D,{title:t,subtitle:s,media:"/assets/cloud.svg",actions:(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:!t||t===j,onClick:v,children:"Change Name"}),(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",onClick:m,children:"Hide Network"})]}),children:[(0,T.jsxs)("p",{children:["Network ",s]}),(0,T.jsx)(C.Z,{required:!0,margin:"dense",variant:"standard",label:"Name",value:j,onChange:p,fullWidth:!0})]})},V=function(e){var n=e.project,t=e.selectedEntity,r=e.selectedNetwork,i=e.onUnselect,a=t?(0,T.jsx)(B,{entity:t,project:n,onRemove:i}):r?(0,T.jsx)(H,{network:r,onChange:i}):(0,T.jsx)(F,{project:n});return(0,T.jsxs)(d.Z,{display:"inline-block",width:"30%",position:"relative",children:[(null!=t||null!=r)&&(0,T.jsx)(g.Z,{color:"primary",size:"medium",onClick:i,sx:{position:"absolute",top:"-16px",right:"-16px"},children:(0,T.jsx)(b.Z,{})}),a]})},G=t(493),K=t(6278),Q=t(7064),Y=t(9900),X=t(5519),$=t(2460),ee=t(7),ne=t(6633),te=t(22),re=t(8384),ie=t(5857),ae=function(e){if(!e.status)return(0,T.jsx)(ie.Z,{sx:{color:X.Z[500]}});var n=e.status.returncode;return n?202===n?(0,T.jsx)(ne.Z,{sx:{color:"#2A72A9"}}):n<400?(0,T.jsx)(re.Z,{sx:{color:ee.Z[500]}}):(0,T.jsx)(te.Z,{sx:{color:$.Z[500]}}):(0,T.jsx)(ie.Z,{sx:{color:$.Z[500]}})},se=function(e){var n=e.job,t=e.agent,r=e.action,i=e.status,s=e.onClick,o=(0,P.I0)(),c=a.useMemo((function(){return"".concat(r,"ing ").concat(n," on ").concat(t)}),[r,n,t]),l=a.useCallback((function(){o((0,U.Kn)({jobName:n,agent:t}))}),[n,t,o]),u=a.useCallback((function(){var e=i?i.response?i.response.state?"Operation "+i.response.state:i.response.response?JSON.stringify(i.response.response):"Format of the response is unknown. Return code was "+i.response.returncode:"Operation successful!":"Operation not started yet!";s(c,e)}),[c,i,s]);return a.useEffect((function(){if(!i||202===i.returncode){var e=setTimeout(l,1e3);return function(){clearTimeout(e)}}if(i&&202!==i.returncode){var n=o((0,L.j8)({services:!1}));return function(){n.abort()}}}),[i,l,o]),(0,T.jsxs)(K.Z,{onClick:u,children:[(0,T.jsx)(Q.Z,{children:(0,T.jsx)(ae,{status:i})}),(0,T.jsx)(Y.Z,{primary:c})]})},oe=function(e){var n=(0,P.v9)((function(e){return e.project.jobActions})),t=a.useState(""),r=(0,i.Z)(t,2),s=r[0],o=r[1],c=a.useState(""),l=(0,i.Z)(c,2),u=l[0],d=l[1],f=a.useCallback((function(e,n){o(e),d(n)}),[]),p=a.useCallback((function(){o(""),d("")}),[]);return(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(G.Z,{children:n.map((function(e){return(0,T.jsx)(se,{job:e.job,agent:e.agent,action:e.action,status:e.result&&e.result[e.action],onClick:f},"".concat(e.job,"-on-").concat(e.agent))}))}),(0,T.jsx)(x.Z,{title:s,open:!(!s&&!u),cancel:{label:"OK",action:p},actions:[],children:(0,T.jsx)(h.Z,{children:(0,T.jsx)(j.Z,{children:u})})})]})},ce=function(e){var n=e.title,t=e.label,r=e.initial,s=e.options,o=e.canDoAction,c=e.onAction,l=a.useState([]),u=(0,i.Z)(l,2),h=u[0],j=u[1],x=a.useCallback((function(e){var n=e.target.value;j("string"===typeof n?[]:n)}),[]),p=a.useCallback((function(){c(h)}),[h,c]);return a.useEffect((function(){j(r)}),[r]),(0,T.jsxs)(d.Z,{display:"flex",alignItems:"center",children:[(0,T.jsx)("p",{children:n}),(0,T.jsx)(Z.Z,{size:"small",sx:{flexGrow:1,margin:"0 5px"},children:(0,T.jsx)(w.Z,{multiple:!0,fullWidth:!0,value:h,onChange:x,renderValue:function(e){return(0,T.jsx)(d.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return(0,T.jsx)(M.Z,{label:e},e)}))})},children:s.map((function(e){return(0,T.jsx)(k.Z,{value:e,children:e},e)}))})}),(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:!o,onClick:p,children:t})]})},le={margin:"0 15px 10px"},ue=function(e){var n,t=(0,P.v9)((function(e){return e.project.current})),o=(0,P.v9)((function(e){return e.login.is_admin})),c=(0,P.v9)((function(e){return e.login.is_user})),l=(0,P.I0)(),g=(0,s.s0)(),b=a.useState(!1),Z=(0,i.Z)(b,2),y=Z[0],k=Z[1],w=a.useState(),C=(0,i.Z)(w,2),S=C[0],A=C[1],I=a.useState(),N=(0,i.Z)(I,2),E=N[0],D=N[1],O=a.useCallback((function(){k(!0)}),[]),W=a.useCallback((function(){k(!1)}),[]),F=a.useCallback((function(){A(void 0),D(void 0)}),[]),_=a.useCallback((function(e){t&&("network"===e.type?(A(void 0),D(t.network.find((function(n){return n.address===e.id})))):"entity"===e.type?(A(t.entity.find((function(n){return n.name===e.id}))),D(void 0)):(A(void 0),D(void 0)))}),[t]),M=a.useCallback((function(){l((0,z.PJ)("Fetching Agents statusses. Please wait...")),l((0,L.j8)({services:!0}))}),[l]),U=a.useCallback((function(e){t&&l((0,J.ty)({name:t.name,project:(0,r.Z)((0,r.Z)({},t),{},{owners:e})}))}),[t,l]),R=a.useCallback((function(e){if(t){var n=t.hidden_network.filter((function(n){return!e.includes(n)}));l((0,z.PJ)("Updating Topology, please wait!")),l((0,J.ty)({name:t.name,project:(0,r.Z)((0,r.Z)({},t),{},{hidden_network:n})}))}}),[t,l]),q=a.useCallback((function(){t&&l((0,J.f3)({project:t.name}))}),[t,l]),B=a.useCallback((function(e){if(t){var n=JSON.parse(e);l((0,J.ty)({name:t.name,project:n}))}}),[t,l]),H=a.useCallback((function(){t&&l((0,J.th)({name:t.name})).unwrap().then((function(){return g("/app")})),W()}),[t,W,l,g]),G=a.useMemo((function(){var e=[];if(!t)return[e,[]];var n=t.network.map((function(e){return{name:e.name,id:e.address,type:"network",color:e.address.startsWith("imported:")?"tomato":void 0}})),r=t.entity.map((function(t){var r,i={name:t.name,id:t.name,type:"entity",color:t.agent?"green":"black"};return null===(r=t.networks)||void 0===r||r.forEach((function(t){var r=n.find((function(e){return e.id===t.address}));r&&e.push({source:i,target:r,weight:3})})),i}));return[e,r.concat(n)]}),[t]),K=(0,i.Z)(G,2),Q=K[0],Y=K[1];if(!t)return null;var X=o||!(null!==(n=t.owners)&&void 0!==n&&n.length)&&c,$=(0,u.Z)(t.owners);return(0,T.jsxs)(a.Fragment,{children:[(0,T.jsxs)("h1",{children:["Project '",t.name,"'"]}),(0,T.jsx)(d.Z,{mb:"8px",pb:"8px",children:t.description.split("\n").map((function(e,n){return(0,T.jsx)("p",{children:e},n)}))}),(0,T.jsx)(ce,{title:"Project Owners",label:"Share",initial:t.owners,options:$,canDoAction:X,onAction:U}),(0,T.jsx)(ce,{title:"Hidden Networks",label:"Show",initial:t.hidden_network,options:t.hidden_network,canDoAction:c,onAction:R}),(0,T.jsxs)(d.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:[(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:!c,onClick:q,sx:le,children:"Refresh Topology"}),(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:!c,onClick:M,sx:le,children:"Fetch NTP Offset"}),(0,T.jsx)(p.Z,{route:"/project/".concat(t.name),filename:"".concat(t.name,".json"),label:"Project",sx:le}),(0,T.jsx)(v.Z,{label:"Project",initial:t,onUpdate:B,disabled:!c,sx:le}),(0,T.jsx)(f.Z,{variant:"contained",color:"secondary",disabled:!X,onClick:O,sx:le,children:"Delete Project"})]}),(0,T.jsx)("h1",{children:"Topology"}),(0,T.jsxs)(d.Z,{display:"flex",alignItems:"flex-start",children:[(0,T.jsx)(d.Z,{display:"inline-block",width:"70%",children:(0,T.jsx)(m.Z,{height:"800px",nodes:Y,links:Q,selectedNode:_,unselectNode:F})}),(0,T.jsx)(V,{entities:t.entity,project:t.name,selectedEntity:S,selectedNetwork:E,onUnselect:F})]}),(0,T.jsx)(oe,{}),(0,T.jsx)(x.Z,{title:"Are you sure?",open:y,cancel:{label:"Cancel",action:W},actions:[{label:"Delete",action:H}],children:(0,T.jsx)(h.Z,{children:(0,T.jsxs)(j.Z,{children:["Deleting the project ",t.name," is irreversible. Proceed anyways?"]})})})]})},de=t(4721),fe=t(1134),he=t(4950),je=function(e){var n=(0,s.UO)().projectId,t=(0,P.I0)(),r=(0,s.s0)(),i=(0,fe.cI)({mode:"onBlur"}),o=i.control,c=i.handleSubmit,l=i.reset,u=i.formState.isValid,d=a.useCallback((function(e){var i=e.scenario;n&&(t((0,he.dw)({project:n,scenario:i})).unwrap().then((function(){r("/app/project/".concat(n,"/scenario/").concat(i))})),l())}),[n,t,r,l]);return(0,T.jsx)(S.Z,{sx:{flexGrow:1},children:(0,T.jsxs)("form",{onSubmit:c(d),children:[(0,T.jsxs)(I.Z,{children:[(0,T.jsx)("h1",{children:"Create Scenario"}),(0,T.jsx)(fe.Qr,{name:"scenario",control:o,rules:{required:!0},defaultValue:"",render:function(e){var n=e.field,t=n.onChange,r=n.onBlur,i=n.value,a=n.ref;return(0,T.jsx)(C.Z,{required:!0,margin:"dense",variant:"standard",label:"Scenario Name",onChange:t,onBlur:r,value:i,inputRef:a,fullWidth:!0})}})]}),(0,T.jsx)(A.Z,{children:(0,T.jsx)(f.Z,{color:"secondary",variant:"contained",type:"submit",disabled:!u,children:"New Scenario"})})]})})},xe=t(818),pe=function(e){var n=(0,s.UO)().projectId,t=(0,P.I0)(),r=(0,s.s0)(),i=(0,fe.cI)({mode:"onBlur"}),o=i.handleSubmit,c=i.register,l=i.reset,u=i.formState.isValid,d=a.useCallback((function(e){var i=e.scenario;n&&(t((0,he.by)({project:n,scenario:i[0]})).unwrap().then((function(e){var t=e.name;r("/app/project/".concat(n,"/scenario/").concat(t))})),l())}),[n,t,l,r]);return(0,T.jsx)(S.Z,{sx:{flexGrow:1},children:(0,T.jsxs)("form",{onSubmit:o(d),children:[(0,T.jsxs)(I.Z,{children:[(0,T.jsx)("h1",{children:"Import Scenario"}),(0,T.jsx)(xe.Z,{label:"Scenario's File",accept:".json",required:!0,name:"scenario",register:c,options:{required:!0}})]}),(0,T.jsx)(A.Z,{children:(0,T.jsx)(f.Z,{color:"secondary",variant:"contained",type:"submit",disabled:!u,children:"Import Scenario"})})]})})},ve=t(1087),me=t(3400),ge=t(6112),be=t(349),Ze=t(6520),ye=t(9852),ke=t(9513),we=function(e){var n=e.title,t=void 0===n?"Launch":n;return(0,T.jsx)(Ze.Z,{title:t,placement:"top-start",children:(0,T.jsx)(ke.Z,{sx:{color:ye.Z[500]}})})},Ce=function(e){var n=e.scenario,t=n.name,r=n.openbach_functions,i=n.arguments,s=e.onDelete,o=e.onLaunch,c=(0,P.v9)((function(e){return e.project.current})),l=a.useCallback((function(e){e.preventDefault(),e.stopPropagation(),o({scenario:t,args:Object.keys(i)})}),[t,i,o]),u=a.useCallback((function(e){e.preventDefault(),e.stopPropagation(),s(t)}),[s,t]),d=r.length,f="".concat(d," openbach function").concat(d>1?"s":"");return(0,T.jsxs)(K.Z,{component:ve.rU,to:"/app/project/".concat(null===c||void 0===c?void 0:c.name,"/scenario/").concat(t),disableRipple:!0,children:[(0,T.jsx)(Q.Z,{onClick:l,children:(0,T.jsx)(we,{})}),(0,T.jsx)(Y.Z,{primary:t,secondary:f}),(0,T.jsx)(ge.Z,{children:(0,T.jsx)(me.Z,{edge:"end",onClick:u,children:(0,T.jsx)(be.Z,{})})})]})},Se=t(808),Ae=function(e){var n=(0,s.UO)().scenarioId,t=(0,P.v9)((function(e){return e.project.current})),r=(0,P.v9)((function(e){return e.login.favorites})),o=(0,P.I0)(),c=(0,s.s0)(),l=a.useState(),u=(0,i.Z)(l,2),f=u[0],p=u[1],v=a.useState(),m=(0,i.Z)(v,2),g=m[0],b=m[1],Z=a.useCallback((function(e){b(e)}),[]),y=a.useCallback((function(){b(void 0)}),[]),k=a.useCallback((function(e){p(e)}),[]),w=a.useCallback((function(){p(void 0)}),[]),C=a.useCallback((function(){null!==t&&void 0!==t&&t.name&&f&&o((0,he.gh)({project:t.name,scenario:f})).unwrap().then((function(){f===n&&c("/app/project/"+t.name)})),w()}),[t,f,n,w,o,c]),S=a.useMemo((function(){var e=null===t||void 0===t?void 0:t.name;return e&&r.hasOwnProperty(e)?Object.fromEntries(r[e].map((function(e){return[e,!0]}))):{}}),[r,t]),A=a.useMemo((function(){var e;return((null===t||void 0===t||null===(e=t.scenario)||void 0===e?void 0:e.slice())||[]).sort((function(e,n){return e.name.localeCompare(n.name)}))}),[t]),I=A.filter((function(e){return S[e.name]})).map((function(e){return(0,T.jsx)(Ce,{scenario:e,onLaunch:Z,onDelete:k},e.name)})),N=A.filter((function(e){return!S[e.name]})).map((function(e){return(0,T.jsx)(Ce,{scenario:e,onLaunch:Z,onDelete:k},e.name)})),E=I.length>0&&0<N.length;return(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(G.Z,{children:I}),E&&(0,T.jsx)(de.Z,{}),(0,T.jsx)(G.Z,{children:N}),(0,T.jsxs)(d.Z,{display:"flex",alignItems:"flex-start",gap:"10%",pl:"10%",pr:"10%",pt:5,width:"100%",boxSizing:"border-box",children:[(0,T.jsx)(je,{}),(0,T.jsx)(pe,{})]}),(0,T.jsx)(x.Z,{title:"Really Delete this Scenario?",open:Boolean(f),cancel:{label:"Cancel",action:w},actions:[{label:"Delete",action:C}],children:(0,T.jsx)(h.Z,{children:(0,T.jsxs)(j.Z,{children:['The scenario "',f,'" will be deleted. This action is unrecoverable. Do you want to continue?']})})}),t&&g&&(0,T.jsx)(Se.Z,{project:t.name,scenario:g.scenario,arguments:g.args,onClose:y})]})},Ie=t(4835),Ne=t(2415),Ee=function(e){var n=e.value,t=e.selected,r=e.children,i=n!==t;return(0,T.jsx)("div",{role:"tabpanel",hidden:i,children:!i&&r})},Pe=function(e){var n=(0,s.UO)(),t=n.projectId,u=n.scenarioId,d=(0,P.I0)(),f=a.useState("project"),h=(0,i.Z)(f,2),j=h[0],x=h[1],p=a.useCallback((function(e,n){x(n)}),[]);return a.useEffect((function(){if(d((0,z.Td)("Project '".concat(t,"'"))),t){var e=d((0,J.e5)({name:t}));return function(){e.abort()}}}),[d,t]),a.useEffect((function(){d((0,R._R)()),u&&x("selected")}),[u,d]),a.useEffect((function(){var e=[d((0,L.j8)({services:!1})),d((0,U.Ly)())];return function(){e.forEach((function(e){e.abort()}))}}),[d]),(0,T.jsxs)(a.Fragment,{children:[(0,T.jsx)(o.Z,{color:"primary",sx:(0,r.Z)({position:"static"},Ne.r),children:(0,T.jsxs)(l.Z,{value:j,onChange:p,centered:!0,variant:"fullWidth",textColor:"inherit",indicatorColor:"secondary",children:[(0,T.jsx)(c.Z,{label:"Project",value:"project"}),(0,T.jsx)(c.Z,{label:"Scenarios",value:"scenarios"}),(0,T.jsx)(c.Z,{label:"Instances",value:"instances"}),(0,T.jsx)(c.Z,{label:u||"No Scenario Selected",value:"selected",disabled:!u})]})}),(0,T.jsx)(Ee,{value:"project",selected:j,children:(0,T.jsx)(ue,{})}),(0,T.jsx)(Ee,{value:"scenarios",selected:j,children:(0,T.jsx)(Ae,{})}),(0,T.jsx)(Ee,{value:"instances",selected:j,children:t&&(0,T.jsx)(Ie.Z,{project:t})}),(0,T.jsx)(Ee,{value:"selected",selected:j,children:e.children})]})}},1524:function(e,n,t){var r=t(9439),i=t(2791),a=t(5002),s=t(184),o={entity:"/assets/server.svg",network:"/assets/cloud.svg",project:"/assets/project.svg"};n.Z=function(e){var n=e.height,t=e.nodes,c=e.links,l=e.selectedNode,u=e.unselectNode,d=function(){var e=i.useState({width:void 0,height:void 0}),n=(0,r.Z)(e,2),t=n[0],a=n[1];return i.useEffect((function(){var e=function(){a({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),f=i.useRef(null);return i.useEffect((function(){if(f.current){for(;f.current.children.length>0;)f.current.children[0].remove();var e=f.current.clientHeight,n=f.current.clientWidth,r=a.A4v(t).force("link",a.Fsl(c).id((function(e){return e.id})).strength((function(e){return e.weight}))).force("collide",a.Hh(30)).force("center-x",a.RUJ(0)).force("center-y",a.Mrm(0)).on("tick",(function(){d.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),h.attr("transform",(function(e){return"translate(".concat(e.x,", ").concat(e.y,")")}))})),i=a.Ys(f.current).attr("viewBox",[-n/2,-e/2,n,e]).attr("style","max-width: 100%; height: auto; height: intrinsic;"),s=i.append("rect").attr("fill","white").attr("height",e).attr("width",n).attr("x",-n/2).attr("y",-e/2),d=i.append("g").attr("class","links").selectAll(".link").data(c).enter().append("line").attr("stroke","#AAA").attr("stroke-width",(function(e){return Math.sqrt(e.weight)})),h=i.append("g").attr("class","nodes").selectAll(".node").data(t).enter().append("g").on("dblclick",(function(e,n){n.fx=null,n.fy=null})).call(a.ohM().on("start",(function(e){e.active||r.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y})).on("drag",(function(e){e.subject.fx=e.x,e.subject.fy=e.y})).on("end",(function(e){e.active||r.alphaTarget(0)})));return h.append("svg:image").attr("height",30).attr("width",30).attr("x",-15).attr("y",-15).attr("xlink:href",(function(e){return o[e.type]})),h.append("text").text((function(e){return e.name})).attr("cursor","pointer").attr("dx",12).attr("dy",".35em").style("fill",(function(e){return e.color?e.color:"network"===e.type?"#757575":"black"})),l&&h.on("click",(function(e,n){return l(n)})),u&&s.on("click",u),function(){r.stop()}}}),[t,c,l,u,d]),(0,s.jsx)("svg",{ref:f,height:n,width:"100%"})}}}]);
//# sourceMappingURL=369.0ea84a06.chunk.js.map