"use strict";(self.webpackChunkihm=self.webpackChunkihm||[]).push([[878],{4835:function(n,e,t){t.d(e,{Z:function(){return nn}});var a=t(4942),r=t(1413),c=t(9439),i=t(2791),s=t(6151),o=t(4454),u=t(9157),l=t(1691),f=t(493),d=t(5484),h=t(6278),p=t(7064),b=t(9900),j=t(349),Z=t(5699),m=t(2426),x=t.n(m),g=t(3400),v=t(9412),_=t(2460),k=t(506),C=t(4950),y=t(5346),S=t(184),I=function(n){var e=n.instance,t=e.status,a=e.scenario_instance_id,r=e.scenario_name,s=e.start_date,u=n.onSelect,l=n.checked,f=n.onCheck,j=(0,y.I0)(),Z=i.useState(!1),m=(0,c.Z)(Z,2),I=m[0],w=m[1],O=i.useCallback((function(){j((0,C.Tg)({instance:a,verbose:I}))}),[a,I,j]),N=i.useCallback((function(){w(!0),u(a)}),[a,u]),E=i.useCallback((function(n){n.preventDefault(),n.stopPropagation(),j((0,C.yb)({instance:a}))}),[a,j]),D=i.useCallback((function(n){n.preventDefault(),n.stopPropagation(),f(a,n.target.checked)}),[a,f]);return i.useEffect((function(){if(I&&O(),"Running"===t||"Scheduling"===t){var n=setInterval(O,I?5e3:1500);return function(){clearInterval(n)}}}),[t,I,O]),(0,S.jsx)(d.ZP,{disablePadding:!0,secondaryAction:"Running"===t?(0,S.jsx)(g.Z,{edge:"end",onClick:E,children:(0,S.jsx)(v.Z,{sx:{color:_.Z[500]}})}):"Scheduling"!==t?(0,S.jsx)(o.Z,{edge:"end",disableRipple:!0,checked:l,onChange:D}):void 0,children:(0,S.jsxs)(h.Z,{onClick:N,children:[(0,S.jsx)(p.Z,{children:(0,S.jsx)(k.Z,{status:t})}),(0,S.jsx)(b.Z,{primary:r,secondary:x()(s).format("YYYY-MM-DD HH:mm:ss")})]})})},w=t(1563),O=t(7574),N=t(1936),E=t(5292),D=t(9149),P=function(n,e){var t=e.label;return t?"[".concat(t,"] (").concat(n,")"):n},M=function n(e){var t=e.instance,a=t.arguments,r=t.openbach_functions;return r?(0,S.jsxs)(i.Fragment,{children:[a&&(0,S.jsx)(w.Z,{primary:"Arguments",leftIcon:(0,S.jsx)(O.Z,{function:"argument"}),nestedItems:a.map((function(n,e){var t=n.name,a=n.value;return(0,S.jsx)(h.Z,{children:(0,S.jsx)(b.Z,{primary:t,secondary:a})},e)}))}),r.map((function(e,t){if((0,D.f5)(e)){var a=e.status,c=e.job;return(0,S.jsx)(w.Z,{primary:P("Start job instance",e),leftIcon:(0,S.jsx)(O.Z,{function:"openbach_function"}),rightIcon:(0,S.jsx)(N.Z,{status:a}),initiallyOpen:!0,inset:!0,nestedItems:c&&(0,S.jsx)(w.Z,{primary:"".concat(c.name," on ").concat(c.entity," (").concat(c.agent,")"),secondary:"(job instance id: ".concat(c.id,")"),rightIcon:(0,S.jsx)(E.Z,{status:c.status}),leftIcon:(0,S.jsx)(O.Z,{function:"start_job_instance"})})},t)}if((0,D.qe)(e)){var i=e.status,s=e.scenario;return(0,S.jsx)(w.Z,{primary:P("Start scenario instance",e),leftIcon:(0,S.jsx)(O.Z,{function:"openbach_function"}),rightIcon:(0,S.jsx)(N.Z,{status:i}),initiallyOpen:!0,inset:!0,nestedItems:s&&(0,S.jsx)(w.Z,{primary:s.scenario_name,secondary:(0,D.Wp)(s),rightIcon:(0,S.jsx)(k.Z,{status:s.status}),leftIcon:(0,S.jsx)(O.Z,{function:"start_scenario_instance"}),initiallyOpen:!0,nestedItems:(0,S.jsx)(n,{instance:e.scenario})})},t)}if((0,D.ne)(e)){var o=e.stop_job_instances.openbach_function_ids.map((function(n){return(0,D.eM)(n,r)}));return(0,S.jsx)(w.Z,{primary:P("Stop job instance",e),secondary:"Stopping jobs "+o.join(", "),leftIcon:(0,S.jsx)(O.Z,{function:"openbach_function"}),rightIcon:(0,S.jsx)(N.Z,{status:e.status})},t)}if((0,D.Nk)(e)){var u=e.stop_scenario_instance.openbach_function_id;return(0,S.jsx)(w.Z,{primary:P("Stop scenario instance",e),secondary:"Stopping scenario "+(0,D.eM)(u,r),leftIcon:(0,S.jsx)(O.Z,{function:"openbach_function"}),rightIcon:(0,S.jsx)(N.Z,{status:e.status})},t)}var l=(0,D.aE)(e);return(0,S.jsx)(w.Z,{primary:P(l||"unknown",e)},t)}))]}):(0,S.jsx)(h.Z,{children:(0,S.jsx)(b.Z,{primary:"Fetching full instance, please wait"})})},R=t(9836),Y=t(3382),A=t(3994),U=t(9281),F=t(6890),q=t(5855),L=function(n){var e=n.files,t=n.onChange,a=i.useState(Object.entries(e).reduce((function(n,e){var t=(0,c.Z)(e,2),a=t[0],r=t[1];return n.concat(Object.entries(r).map((function(n){var e=(0,c.Z)(n,2),t=e[0],r=e[1];return[!1,a,t,r]})))}),[])),r=(0,c.Z)(a,2),s=r[0],u=r[1],l=i.useCallback((function(n){var e=n.target.checked;u((function(n){return n.map((function(n){var t=(0,c.Z)(n,4),a=(t[0],t[1]),r=t[2],i=t[3];return[e,a,r,i]}))}))}),[]),f=i.useCallback((function(n){return function(e){u((function(e){return e.map((function(e,t){var a=(0,c.Z)(e,4),r=a[0],i=a[1],s=a[2],o=a[3];return[t===n?!r:r,i,s,o]}))}))}}),[]);i.useEffect((function(){t(s)}),[s,t]);var d=s.reduce((function(n,e){return e[0]?n+1:n}),0);return(0,S.jsx)(U.Z,{children:(0,S.jsxs)(R.Z,{size:"medium",children:[(0,S.jsx)(F.Z,{children:(0,S.jsxs)(q.Z,{children:[(0,S.jsx)(A.Z,{padding:"checkbox",children:(0,S.jsx)(o.Z,{color:"primary",indeterminate:d>0&&d<s.length,checked:s.length>0&&d===s.length,onChange:l})}),(0,S.jsx)(A.Z,{children:"Job Name"}),(0,S.jsx)(A.Z,{children:"File"}),(0,S.jsx)(A.Z,{children:"Amount"})]})}),(0,S.jsx)(Y.Z,{children:s.map((function(n,e){var t=(0,c.Z)(n,4),a=t[0],r=t[1],i=t[2],s=t[3];return(0,S.jsxs)(q.Z,{hover:!0,onClick:f(e),role:"checkbox",tabIndex:-1,selected:a,sx:{cursor:"pointer"},children:[(0,S.jsx)(A.Z,{padding:"checkbox",children:(0,S.jsx)(o.Z,{color:"primary",checked:a})}),(0,S.jsx)(A.Z,{children:r}),(0,S.jsx)(A.Z,{children:i}),(0,S.jsx)(A.Z,{children:s})]},e)}))})]})})},W=t(9012),B=t(5523),H=t(7391),J=t(4165),T=t(5861),V=t(1203),z=(0,V.wM)("influx/getStatisticsNames",function(){var n=(0,T.Z)((0,J.Z)().mark((function n(e,t){var a,r;return(0,J.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.project,r=t.dispatch,n.next=4,(0,V.BN)("/openbach/statistics/"+a+"/",r);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),G=((0,V.wM)("influx/getStatisticsNamesAndSuffixes",function(){var n=(0,T.Z)((0,J.Z)().mark((function n(e,t){var a,r;return(0,J.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.jobId,r=t.dispatch,n.next=4,(0,V.BN)("/openbach/statistic/"+a+"/",r);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),(0,V.wM)("influx/createChronografDashboard",function(){var n=(0,T.Z)((0,J.Z)().mark((function n(e,t){var a,r,c,i,s,o,u;return(0,J.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.instance,r=e.statistics,c=e.grouped,i=t.dispatch,s=[],o=[],r.slice().sort((function(n,e){return n.jobId===e.jobId?n.unit===e.unit?0:n.unit<e.unit?-1:1:n.jobId-e.jobId})).forEach((function(n,e,t){var a=n.jobAgent,r=n.jobName,i=n.jobId,u=n.statName,l=n.unit;c&&0!==e&&t[e-1].jobId===i&&t[e-1].unit===l||(s=[],o.push({jobName:r,jobAgent:a,jobId:i,targets:s,unit:l})),s.push(u)})),u={cells:o.map((function(n,e){return{h:4,name:"".concat(n.jobName," (#").concat(n.jobId,")"),queries:n.targets.map((function(e){return{query:['SELECT "'.concat(e,'" FROM "openbach"."openbach"."').concat(n.jobName,'"'),"WHERE time > ".concat(x()(a.start_date).valueOf(),"ms"),"AND time < ".concat(a.stop_date?x()(a.stop_date).add(1,"s").valueOf()+"ms":"now()"),'AND "@job_instance_id"=\''.concat(n.jobId,'\' GROUP BY "@suffix" FILL(null)')].join(" "),source:"",text:"".concat(e," (").concat(n.unit,")"),type:"influxql"}})),w:12,x:0,y:4*e}})),name:"Scenario instance #".concat(a.owner_scenario_instance_id)},n.next=8,(0,V.BN)("/chronograf/api/dashboards",i,"POST",u);case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())),K=t(5616),Q=function n(e){var t=[];return e&&e.openbach_functions&&e.openbach_functions.forEach((function(e){if((0,D.f5)(e)){if(e.job){var a=e.job,r=a.name,c=a.id,i=a.agent;t.push({name:r,id:c,agent:i})}}else(0,D.qe)(e)&&(t=t.concat(n(e.scenario)))})),t},X=function(n){var e=n.project,t=n.instance,s=n.error,u=n.onChange,d=(0,y.I0)(),h=i.useState({}),p=(0,c.Z)(h,2),b=p[0],j=p[1],Z=i.useState({}),m=(0,c.Z)(Z,2),x=m[0],g=m[1],v=i.useState(!1),_=(0,c.Z)(v,2),k=_[0],C=_[1],I=i.useCallback((function(n){C(n.target.checked)}),[]),O=i.useMemo((function(){return Q(t)}),[t]),N=i.useCallback((function(n,e){var t=x[n];if(t){var a=t[e];if(a)return a[0]}return!1}),[x]),E=i.useCallback((function(n,e){var t=x[n];if(t){var a=t[e];if(a)return a[1]}return""}),[x]),D=i.useCallback((function(n,e){return function(t){var c=t.target.checked;g((function(t){var i=t[n]||{},s=i[e];return(0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},n,(0,r.Z)((0,r.Z)({},i),{},(0,a.Z)({},e,s?[c,s[1]]:[c,""]))))}))}}),[]),P=i.useCallback((function(n,e){return function(t){var c=t.target.value;g((function(t){var i=t[n]||{},s=i[e];return(0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},n,(0,r.Z)((0,r.Z)({},i),{},(0,a.Z)({},e,s?[s[0],c]:[!1,c]))))}))}}),[]);return i.useEffect((function(){j({});var n=d(z({project:e}));return n.unwrap().then((function(n){j(n)})).catch((function(n){"AbortError"!==n.name&&d((0,K.PJ)("Statistics names could not be fetched: "+n.message))})),function(){n.abort()}}),[e,d]),i.useEffect((function(){var n=Object.entries(x).reduce((function(n,e){var t=(0,c.Z)(e,2),a=t[0],r=t[1];return n.concat(Object.entries(r).filter((function(n){var e=(0,c.Z)(n,2);e[0];return e[1][0]})).map((function(n){var e=(0,c.Z)(n,2),t=e[0],r=e[1],i=Number(a),s=r[1],o=O.find((function(n){return n.id===i}));return o?{jobAgent:o.agent,jobName:o.name,jobId:i,statName:t,unit:s}:{jobAgent:"",jobName:"",jobId:i,statName:t,unit:s}})))}),[]);u({grouped:k,statistics:n})}),[x,k,O,u]),null!=s?(0,S.jsxs)(i.Fragment,{children:[(0,S.jsxs)(l.Z,{children:["Chronograf returned the error ",s," when trying to create the dashboard for the selected statistics."]}),(0,S.jsx)(l.Z,{children:"Would you like to open Chronograf to further understand the problem?"})]}):(0,S.jsxs)(i.Fragment,{children:[(0,S.jsx)(f.Z,{children:O.map((function(n,e){var t=n.name,a=n.id,r=n.agent;return(0,S.jsx)(w.Z,{primary:"".concat(t," (id ").concat(a," on ").concat(r,")"),initiallyOpen:!0,nestedItems:(b[t]||[]).map((function(n,e){return(0,S.jsx)(w.Z,{primary:n,leftIcon:(0,S.jsx)(o.Z,{checked:N(a,n),onChange:D(a,n)}),rightIcon:(0,S.jsx)(H.Z,{margin:"dense",variant:"standard",label:"Units",value:E(a,n),onChange:P(a,n),sx:{width:200}})},e)}))},e)}))}),(0,S.jsx)(W.Z,{children:(0,S.jsx)(B.Z,{control:(0,S.jsx)(o.Z,{checked:k,onChange:I}),label:"Select this option to group in the same graph the statistics of a single job that share the same units"})})]})},$=function(n){var e=n.instance,t=n.onClose,a=e.project_name,r=e.scenario_instance_id,s=e.owner_scenario_instance_id,o=e.scenario_name,d=e.status,h=e.start_date,p=e.stop_date,b=(0,y.I0)(),j=i.useState(),m=(0,c.Z)(j,2),x=m[0],g=m[1],v=i.useState({}),_=(0,c.Z)(v,2),I=_[0],O=_[1],N=i.useState([]),E=(0,c.Z)(N,2),P=E[0],R=E[1],Y=i.useState({grouped:!1,statistics:[]}),A=(0,c.Z)(Y,2),U=A[0],F=A[1],q=i.useState(),W=(0,c.Z)(q,2),B=W[0],H=W[1],J=i.useCallback((function(){g("stats")}),[]),T=i.useCallback((function(){b((0,C.py)({instance:r})).unwrap().then((function(n){O(n),0===Object.keys(n).length?(0,V.UR)("/openbach/scenario_instance/"+r+"/csv/"):g("export")}))}),[b,r]),z=i.useCallback((function(){g("delete")}),[]),K=i.useCallback((function(){var n="display:Off,pause:!f,value:0",e="now";if(p){var a=new Date(p);a.setSeconds(a.getSeconds()+1),a.setMilliseconds(0),e="'"+a.toISOString()+"'"}else n="display:'5 seconds',pause:!f,section:1,value:5000";var r=new Date(h);r.setMilliseconds(0);var c=["/kibana/app/dashboards#/view/default_dashboard?_g=(refreshInterval:(",n,"),time:(from:'",r.toISOString(),"',mode:absolute,to:",e,"))&_a=(columns:!(),dataSource:(dataViewId:default_logstash_index,type:dataView),filters:!(),","interval:auto,query:(language:kuery,query:'owner_scenario_instance_id:",s,"'),sort:!(!('@timestamp',desc)))"];(0,V.UR)(c.join("")),t()}),[s,h,p,t]),Q=i.useCallback((function(){var n=U.grouped,a=U.statistics;a.length>0?b(G({instance:e,grouped:n,statistics:a})).unwrap().then((function(n){var e=n.id;(0,V.UR)("/chronograf/sources/0/dashboards/"+e),t()})).catch((function(e){F({grouped:n,statistics:[]}),H(e.message)})):((0,V.UR)("/chronograf/"),t())}),[e,U,t,b]),$=i.useCallback((function(){b((0,C.yb)({instance:r}))}),[r,b]),nn=i.useCallback((function(){b((0,C.ch)({instance:r})),t()}),[r,t,b]),en=i.useCallback((function(){var n=P.filter((function(n){return n[0]})).map((function(n){return encodeURIComponent(n[1])+"="+encodeURIComponent(n[2])})).join("&"),e="/openbach/scenario_instance/"+r+"/";(0,V.UR)(n?e+"archive?"+n:"csv"),t()}),[r,P,t]),tn=i.useMemo((function(){switch(x){case"stats":return(0,S.jsx)(X,{onChange:F,instance:e,project:a,error:B});case"export":return(0,S.jsx)(L,{onChange:R,files:I});case"delete":return(0,S.jsxs)(i.Fragment,{children:[(0,S.jsx)(l.Z,{children:"The informations of this scenario instance will be removed from the database. You will not be able to recover them."}),(0,S.jsx)(l.Z,{children:"Proceed?"})]});default:var n=(0,D.Wp)(e);return(0,S.jsx)(f.Z,{children:(0,S.jsx)(w.Z,{primary:e.scenario_name,secondary:n,rightIcon:(0,S.jsx)(k.Z,{status:e.status}),initiallyOpen:!0,inset:!0,nestedItems:(0,S.jsx)(M,{instance:e})})})}}),[x,e,a,B,I]),an=i.useMemo((function(){switch(x){case"stats":return[{label:"Show statistics",action:Q}];case"export":return[{label:"Download",action:en}];case"delete":return[{label:"Yes",action:nn}];default:var n=[{label:"Show logs",action:K},{label:"Show statistics",action:J}];return"Running"===d?n.splice(0,0,{label:"Stop Instance",action:$}):"Scheduling"!==d&&n.splice(0,0,{label:"Delete",action:z},{label:"Export to CSV",action:T}),n}}),[x,d,nn,en,$,z,T,J,K,Q]);return(0,S.jsx)(Z.Z,{open:!0,title:o,cancel:{label:"delete"===x?"No":null==x?"OK":"Cancel",action:t},actions:an,children:(0,S.jsx)(u.Z,{children:tn})})},nn=function(n){var e=n.project,t=n.scenario,m=(0,y.v9)((function(n){return t?n.project.currentScenarioInstances:n.project.scenarioInstances})),x=(0,y.v9)((function(n){return t?n.project.moreCurrentInstances:n.project.moreInstances})),g=(0,y.I0)(),v=i.useState(),_=(0,c.Z)(v,2),k=_[0],w=_[1],O=i.useState({}),N=(0,c.Z)(O,2),E=N[0],D=N[1],P=i.useState([]),M=(0,c.Z)(P,2),R=M[0],Y=M[1],A=i.useCallback((function(){var n=m.filter((function(n){var e=n.status,t=n.scenario_instance_id;return"Scheduling"!==e&&"Running"!==e&&E[t]}));Y(n.map((function(n){return n.scenario_instance_id})))}),[m,E]),U=i.useCallback((function(){Y([])}),[]),F=i.useCallback((function(){R.forEach((function(n){return g((0,C.ch)({instance:n}))})),U()}),[R,U,g]),q=i.useCallback((function(n,e){D((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},n,e))}))}),[]),L=i.useCallback((function(n){var e=n.target.checked;D((function(n){return Object.fromEntries(Object.keys(n).map((function(n){return[n,e]})))}))}),[]),W=i.useCallback((function(n){w(n)}),[]),B=i.useCallback((function(){w(void 0)}),[]),H=i.useCallback((function(){if(x){var n=g(t?(0,C.wL)({project:e,scenario:t}):(0,C.mp)({project:e}));return n.unwrap().then((function(n){var e=n.map((function(n){return[n.scenario_instance_id,!1]}));D((function(n){return(0,r.Z)((0,r.Z)({},n),Object.fromEntries(e))}))})),n}}),[e,t,x,g]);i.useEffect((function(){if(!m.length){var n=H();if(n)return function(){n.abort()}}}),[m,H]);var J=Object.values(E).reduce((function(n,e){var t=n.t,a=n.f;return e?{t:t+1,f:a}:{f:a+1,t:t}}),{t:0,f:0}),T=0!==J.t&&0!==J.f,V=m.find((function(n){return n.scenario_instance_id===k}));return(0,S.jsxs)(i.Fragment,{children:[(0,S.jsxs)(f.Z,{children:[(0,S.jsx)(d.ZP,{disablePadding:!0,secondaryAction:(0,S.jsx)(o.Z,{edge:"end",disableRipple:!0,checked:!T&&0!==J.t,indeterminate:T,onChange:L}),children:(0,S.jsxs)(h.Z,{onClick:A,children:[(0,S.jsx)(p.Z,{children:(0,S.jsx)(j.Z,{title:"Delete Selected Instances"})}),(0,S.jsx)(b.Z,{primary:"Delete Selected Instances"})]})}),m.map((function(n){return(0,S.jsx)(I,{instance:n,checked:Boolean(E[n.scenario_instance_id]),onSelect:W,onCheck:q},n.scenario_instance_id)}))]}),(0,S.jsx)(s.Z,{variant:"contained",color:"secondary",onClick:H,sx:{mb:2},children:"Load More"}),V&&(0,S.jsx)($,{instance:V,onClose:B}),R.length>0&&(0,S.jsx)(Z.Z,{open:!0,title:"Delete Scenario Instances",cancel:{label:"No",action:U},actions:[{label:"Yes",action:F}],children:(0,S.jsxs)(u.Z,{children:[(0,S.jsxs)(l.Z,{children:["The informations of ",R.length," scenario instance",R.length>1?"s":""," will be removed from the database. You will not be able to recover them."]}),(0,S.jsx)(l.Z,{children:"Proceed?"})]})})]})}},808:function(n,e,t){var a=t(4942),r=t(1413),c=t(9439),i=t(2791),s=t(9157),o=t(1691),u=t(7391),l=t(5699),f=t(4950),d=t(5346),h=t(184);e.Z=function(n){var e=n.project,t=n.scenario,p=n.arguments,b=n.onClose,j=(0,d.I0)(),Z=i.useState(Object.fromEntries(p.map((function(n){return[n,""]})))),m=(0,c.Z)(Z,2),x=m[0],g=m[1],v=i.useCallback((function(n){return function(e){g((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},n,e.target.value))}))}}),[]),_=i.useCallback((function(n){j((0,f.DJ)({project:e,scenario:t,args:x})),b()}),[e,t,x,b,j]);return(0,h.jsx)(l.Z,{open:!0,title:"Launch scenario ".concat(t),cancel:{label:"Cancel",action:b},actions:[{label:"Launch",action:"submit"}],onSubmit:_,children:(0,h.jsxs)(s.Z,{children:[p.length>0&&(0,h.jsx)(o.Z,{children:"Please fill in the arguments of the scenario before proceeding:"}),p.map((function(n){return(0,h.jsx)(u.Z,{required:!0,margin:"dense",variant:"standard",label:n,value:x[n],onChange:v(n),fullWidth:!0},n)})),(0,h.jsx)(o.Z,{mt:p.length?3:0,children:"Launch the Scenario!"})]})})}},7381:function(n,e,t){var a=t(2791),r=t(6151),c=t(6528),i=t(1203),s=t(184);e.Z=function(n){var e=n.route,t=n.filename,o=n.label,u=n.disabled,l=n.sx,f=a.useCallback((function(){(0,i.UR)(e,t)}),[e,t]);return(0,s.jsxs)(r.Z,{variant:"contained",color:"secondary",disabled:u,onClick:f,startIcon:(0,s.jsx)(c.Z,{}),sx:l,children:["Download ",o]})}},565:function(n,e,t){var a=t(9439),r=t(2791),c=t(6151),i=t(9157),s=t(7391),o=t(5699),u=t(184);e.Z=function(n){var e=n.initial,t=n.onUpdate,l=n.label,f=n.disabled,d=n.sx,h=r.useState(!1),p=(0,a.Z)(h,2),b=p[0],j=p[1],Z=r.useState(""),m=(0,a.Z)(Z,2),x=m[0],g=m[1],v=r.useCallback((function(){j(!0)}),[]),_=r.useCallback((function(){j(!1)}),[]),k=r.useCallback((function(n){n.preventDefault(),n.stopPropagation(),t(x),_()}),[x,t,_]),C=r.useCallback((function(n){g(n.target.value)}),[]);return r.useEffect((function(){g(JSON.stringify(e,null,4))}),[e]),(0,u.jsxs)(r.Fragment,{children:[(0,u.jsxs)(c.Z,{variant:"contained",color:"secondary",disabled:f,onClick:v,sx:d,children:["Edit ",l]}),(0,u.jsx)(o.Z,{title:"JSON Editor",modal:!0,open:b,onSubmit:k,cancel:{label:"Cancel",action:_},actions:[{label:"Submit",action:"submit"}],children:(0,u.jsx)(i.Z,{sx:{width:550},dividers:!0,children:(0,u.jsx)(s.Z,{margin:"dense",variant:"standard",label:"Content",value:x,onChange:C,fullWidth:!0,multiline:!0,rows:25})})})]})}},9149:function(n,e,t){t.d(e,{Nk:function(){return u},Wp:function(){return h},aE:function(){return f},eM:function(){return p},f5:function(){return i},ne:function(){return o},qe:function(){return s}});var a=t(2426),r=t.n(a),c="YYYY-MM-DD HH:mm:ss",i=function(n){return n.hasOwnProperty("start_job_instance")},s=function(n){return n.hasOwnProperty("start_scenario_instance")},o=function(n){return n.hasOwnProperty("stop_job_instances")},u=function(n){return n.hasOwnProperty("stop_scenario_instance")},l={id:null,label:null,launch_date:null,status:null,wait:null},f=function(n){for(var e in n)if(n.hasOwnProperty(e)&&!l.hasOwnProperty(e))return e},d=function(n){var e=n%60;return e>9?String(e):"0"+e},h=function(n){var e=n.scenario_instance_id,t=n.start_date,a=n.stop_date,i=r()(t),s=i.format(c),o="(scenario instance id: ".concat(e,")");if(!a)return"".concat(o," Ongoing [started ").concat(s,"]");var u=r()(a),l=u.format(c),f=d(u.diff(i,"seconds")),h=d(u.diff(i,"minutes")),p=u.diff(i,"hours");return"".concat(o," ").concat(s," --\x3e ").concat(l," [Duration of ").concat(p,":").concat(h,":").concat(f,"]")},p=function(n,e){var t=e.find((function(e){return e.id===n}));return(null===t||void 0===t?void 0:t.label)||String(n)}}}]);
//# sourceMappingURL=878.afd531dd.chunk.js.map